<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
         <title>Checkout</title>
         <!-- 
             This metadata lets us store the values of the parameters 
                on the previous page into bean values for use later
         -->
         <f:metadata>
            <f:viewParam name="movieID" value="#{homeBean.movieTitle}"/>
            <f:viewParam name="timeID" value="#{homeBean.selectedTime}"/>
         </f:metadata>
         
         <!-- This was our original method of storing the values in a bean but it didn't work 
            <c:set target="#{homeBean}" property="movieTitle" value="#{param.movieID}" />
            <c:set target="#{homeBean}" property="selectedTime" value="#{param.timeID}" />
         -->
    </h:head>
   
    <h:body>
        <ui:composition template="./Template/TheaterTemplate.xhtml">
            <ui:define name="top"/>
            
            <ui:define name="left"/>

            <ui:define name="content">
                <h1>Checkout Information</h1>
                <h2>For #{homeBean.movieTitle} at #{homeBean.selectedTime}</h2>
                
                <h:form>
                    <div>
                        <h:outputText value="Numver of Tickets: "/>
                        <h:inputText value="#{homeBean.numTickets}">
                            <f:passThroughAttribute name="placeholder" value="Tickets" />
                        </h:inputText>
                    </div>
                    
                    <div>
                        <h:outputText value="Credit Card: "/>
                        <h:inputText maxlength="16" value="#{homeBean.creditCard}">
                            <f:passThroughAttribute name="placeholder" value="Credit Card Number" />
                            <f:validator validatorId="beans.CCValidator" />
                        </h:inputText>
                    </div>
                    
                    <div>
                        <h:outputText value="Name: "/>
                        <h:inputText value="#{homeBean.name}">
                            <f:passThroughAttribute name="placeholder" value="Cardholder Name" />
                        </h:inputText>
                    </div>
                    <h:commandButton id="CheckoutButton" action="Confirmation.xhtml" value="Next"/>
                     
                </h:form>
                
            </ui:define>
            
            <ui:define name="bottom"/>
        </ui:composition>
    </h:body>
</html>